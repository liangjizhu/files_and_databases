"CREATE TABLE supplier(
    -- If supplier is deleted, delete all offers that are not fullfiled yet
    -- Set supplier to null in the fullfiled ones
    cif VARCHAR(10) NOT NULL,
    provider_name VARCHAR(50) NOT NULL,
    full_name VARCHAR(120) NOT NULL,
    supplier_email VARCHAR(120) NOT NULL,
    supplier_phone_number INT CHECK(supplier_phone_number >= 100000000),
    comm_address VARCHAR(120) NOT NULL,
    provider_country CHAR(45) NOT NULL,
    provider_bankacc CHAR(30) NOT NULL,
    offer FLOAT CHECK(offer > 0),
    fulfilled_orders VARCHAR(15),
    CONSTRAINT pk_supplier PRIMARY KEY(cif),
    CONSTRAINT check_supplier_phone_number CHECK(999999999 > supplier_phone_number),
    CONSTRAINT fk_fullfilled_orders FOREIGN KEY(fulfilled_orders) REFERENCES replacement_order(replacement_order_id)
);"

INSERT INTO supplier(cif, provider_name, full_name, supplier_email, supplier_phone_number, comm_address, provider_country, provider_bankacc)
SELECT
    PROV_TAXID,
    SUPPLIER,
    PROV_PERSON,
    PROV_EMAIL,
    PROV_MOBILE,
    PROV_ADDRESS,
    PROV_COUNTRY,
    PROV_BANKACC
FROM fsdb.catalogue
GROUP BY PROV_TAXID, SUPPLIER, PROV_PERSON, PROV_EMAIL, PROV_MOBILE, PROV_ADDRESS, PROV_COUNTRY, PROV_BANKACC;
